---
- name: Configure container-specific files (optional)
  ansible.builtin.copy:
    src: "{{ item.src }}"
    dest: "{{ app.path }}/{{ item.dest }}"
    mode: "{{ item.mode | default('0644') }}"
  loop: "{{ app.config_files | default([]) }}"
  loop_control:
    label: "{{ item.dest }}"
  when:
    - service_state == 'present'
    - app.config_files is defined
    - app.config_files | length > 0
  notify: "restart container service"
