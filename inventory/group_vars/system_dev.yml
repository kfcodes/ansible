---
is_control_node: true
allow_reboot: false
install_docker: true

system_user:
  name: devuser
  create_home: true
  ssh_public_key_path: "{{ ssh_key_dir }}/host_systems.pub"
  groups:
    - video

create_internal_users: false

ssh_keys_to_generate:
  - host_systems
  - github
  - gitlab

control_node_root: "/srv/control"
control_backups_root: "{{ control_node_root }}/backups"
control_artifacts_root: "{{ control_node_root }}/artifacts"

default_rsync_opts:
  - "--archive"
  - "--compress"

# === Pull jobs (remote → control) ===
pull_jobs:
  - name: "Pull app resources"
    src: "/opt/app/resources/"
    dest: "{{ control_backups_root }}/app_resources/{{ inventory_hostname }}/"
    rsync_opts: "{{ default_rsync_opts }}"
  - name: "Pull DB backups"
    src: "/var/backups/db/"
    dest: "{{ control_backups_root }}/db/{{ inventory_hostname }}/"
    rsync_opts: "{{ default_rsync_opts }}"

# === Push jobs (control → remote) ===
push_jobs:
  - name: "Push app configuration"
    src: "{{ control_artifacts_root }}/app_config/"
    dest: "/etc/myapp/config/"
    rsync_opts: "{{ default_rsync_opts }}"

cli_tools:
  - python3-venv
  - fd-find
  - bat
  - jq
  - man-db
  - htop
  - tmux
  - rsync
  - apt-transport-https
  - ca-certificates
  - curl
  - ripgrep

python_tools:
  - python3-pip
  - virtualenv
  - python3-setuptools
  - python3-dev
  - python3-wheel
  - pipx
  - software-properties-common

system_utils:
  - ca-certificates
  - software-properties-common
  - net-tools
  - iproute2
  - lsof
  - iotop
  - rsync
  - ncdu
  - sysstat
  - glances
  - acl

gui_utils:
  - remmina
  - texlive-full
  - filezilla
  - darktable
  - ansible-lint
  - python3
  - python3-venv
  - python3-setuptools
  - build-essential
  - ssh
  - git
  - curl
  - rsync
  - sudo
  - openssh-server
  - yamllint

db_tools:
  - mariadb-server

# Final combined list (apt will dedupe if repeats occur)
local_system_packages: >-
  {{ cli_tools + python_tools + system_utils + gui_utils + db_tools }}
